=== Plugin Name ===
Contributors: Kripak Igor https://github.com/kripak-igor
Tags: облачная касса, фискализация, электронный чек
Requires PHP: 5.3 или выше 
Requires at least: 4.8 или выше
Tested up to: 6.0
Stable tag: 1.0
License: GPLv3
License URI: https://www.gnu.org/licenses/gpl-3.0.html

== Description ==
# Облачная касса Innokassa для WooCommerce

Сервис Innokassa предоставляет в аренду облачные-кассы для Вашего бизнеса на различных платформах в соответствии требованиям ФЗ-54.

Для работы модуля необходима [регистрация в сервисе](https://innokassa.ru/#connection_request).

## Возможности

* Автоматическая фискализация прихода
* Обширный набор настроек

## Установка

### Ручная

* Скачайте архив текущего репозитория
* Разархивируйте содержимое в `wp-content/plugins/`
* В панели администратора перейдите во вкладку `Плагины`, возле плагина `Innokassa` нажмите `активировать` (если вместо кнопки `активировать` есть поле `деактивировать`, деактивируйте модуль и активируйте его заного)

### Автоматическая 

* Перейдите во вкладку `Плагины` в панели администратора и нажмите кнопку `Добавить новый`
* В поиской строке введите `Innokassa`
* Нажмите кнопку `Установить` в карточке модуля 

## Настройки <a name="settings"></a>

![](https://innokassa.ru/images/woo_screen_settings.png)
>*Настройки модуля фискалзации*

Настройки `Группа касс`, `Идентификатор актора` и `Токен актора` выдаются клиенту после заключения договора и регистрации кассы.

Остальные параметры:
* `Налогообложение` - то что установлено на кассе (может быть несколько)
* `Место расчетов` - то что установлено на кассе (может быть несколько)
* `Тип позиции чека по умолчанию` - для всех позиций чека, кроме доставки
* `НДС позиции чека по умолчанию` - если товарам в интернет-магазине не установлен НДС, тогда значение будет браться из этой настройки
* `НДС доставки` - для всех видов достовок
* `Схема фискализации` - типы чеков, которые необходимо пробивать в автоматическом режиме, доступные значения:
    * `Предоплата, полный расчет`
    * `Полный расчет`
* `Статус заказа для чека предоплаты` - в момент когда заказ получит указанный статус - будет пробит первый чек "предоплата"
* `Статус заказа для чека полного расчета` - в момент когда заказ получит указанный статус - будет пробит второй чек заказа "полный расчет"

> При сохранении настроек они сверяются с данными на кассе (`Группа касс`, `Адрес сайта`, `Актор`, `Актор id`, `Налогообложение`) и в случае ошибки, настройки будут сброшены к предыдущему состоянию, а на страницу будут выведены соответствующие уведомления.

> Без корректных настроек работа модуля невозможна


## Работа модуля <a name="modulework"></a>

> Модуль работает на основании заказов, без учета отгрузок

Заказ фискализируется в автоматическом режиме на основании настроек и зависит от статуса заказа.

Все ручные операции (просмотр чеков, чек возврата, ввод кодов маркировки и прочее) осуществляются в ЛК на сайте вендора [crm.innokassa.ru](https://crm.innokassa.ru/).

> Примечание: сервер касс не всегда может провести фискализацию по запросу, поэтому модуль формирует очередь чеков на фискализацию. Если чек не был пробит в момент отправки на кассу, значит он будет пробит в ближайшее время.

> Примечание: доставки по заказу не конкретизируется, а объединяются все в одну позицию с наименованием "Доставка" и с суммированием цены всех доставок

> Примечание: модуль не фискализирует заказ при его создании, но после создания заказа можно изменить статус заказа либо повторно его сохранить для автоматической фискализации
